% Based on template by MR

\documentclass[12pt,twoside,notitlepage]{report}

\usepackage{a4}
\usepackage{verbatim}

\input{epsf}                            % to allow postscript inclusions
% On thor and CUS read top of file:
%     /opt/TeX/lib/texmf/tex/dvips/epsf.sty
% On CL machines read:
%     /usr/lib/tex/macros/dvips/epsf.tex



\raggedbottom                           % try to avoid widows and orphans
\sloppy
\clubpenalty1000%
\widowpenalty1000%

\addtolength{\oddsidemargin}{6mm}       % adjust margins
\addtolength{\evensidemargin}{-8mm}

\renewcommand{\baselinestretch}{1.1}    % adjust line spacing to make
                                        % more readable

\begin{document}

\bibliographystyle{plain}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Title


\pagestyle{empty}

\hfill{\LARGE \bf Charlie Shepherd}

\vspace*{60mm}
\begin{center}
\Huge
{\bf PDB: A Distributed Database Based on Paxos} \\
\vspace*{5mm}
Computer Science Tripos \\
\vspace*{5mm}
Churchill College \\
\vspace*{5mm}
\today  % today's date
\end{center}

\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Proforma, table of contents and list of figures

\setcounter{page}{1}
\pagenumbering{roman}
\pagestyle{plain}

\chapter*{Proforma}

{\large
\begin{tabular}{ll}
Name:               & \bf Charlie Shepherd                        \\
College:            & \bf Churchill College                     \\
Project Title:      & \bf PDB: A Distributed Database Based on Paxos \\
Examination:        & \bf Computer Science Tripos, July 2013        \\
Word Count:         & \bf wordcount \\
Project Originator: & Charlie Shepherd                    \\
Supervisor:         & Stephen Cross                    \\
\end{tabular}
}


\section*{Original Aims of the Project}

\subsection*{Project aims}

I aim to implement a distributed database. This will be based on the Paxos protocol.

\subsubsection*{Paxos}

The first half of the project is to implement the Paxos protocol. This will be done in a module,
providing an interface which the database can then use to 

The project must correctly implement the Paxos protocol.
The library must be capable of forming a running network,
in particular dynamic leader election,
as well as achieving consensus on a key/value store across the network.

\subsubsection*{Database}

The database must implement a subset of SQL, specifically:
\begin{enumerate}
\item A single table with a static name
\item SELECT/INSERT
\item WHERE
\item GROUP BY
\item ORDER BY
\item Aggregation
\end{enumerate}

The database must have all ACID properties, that is:
\begin{enumerate}
\item Atomic
\item Consistent
\item Isolated
\item Durable
\end{enumerate}


\section*{Work Completed}

All that has been completed appears in this dissertation.

\section*{Special Difficulties}

None.

\newpage
\section*{Declaration}

I, Charlie Shepherd of Churchill College, being a candidate for Part II of the Computer Science
Tripos, hereby declare that this dissertation and the work described in it are my own work,
unaided except as may be specified below, and that the dissertation does not contain material that
has already been used to any substantial extent for a comparable purpose.

\bigskip
\leftline{Signed: }

\medskip
\leftline{Date: \today}

\cleardoublepage

\tableofcontents

\listoffigures

\newpage
\section*{Acknowledgements}

Acknowledge various people

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% now for the chapters

\cleardoublepage        % just to make sure before the page numbering
                        % is changed

\setcounter{page}{1}
\pagenumbering{arabic}
\pagestyle{headings}

\chapter{Introduction}

\section{Motivation}

I set out to build a distributed database based on Paxos. Paxos was first described in Leslie
Lamport's paper \emph{The Part Time Parliament} \cite{lamport98}.

how it integrates with ecosystem (aka what's already out there).


talk about distributed, p2p advantages

\section{Distributed Consensus Problem}


Paxos vs 2PC etc.

\section{Databases}
\subsection{ACID}

what is ACID

Why do we want it?

\subsection{Centralisation vs Distributed}

Centralised databases are used in different situations to distributed databases.
C: Easier to perform organise, edit, query, backup. May slow down under load.
easier to maintain integrity of data
D: Can be slow accessing non local data. Need to ensure consistency

centralised: simpler, faster vs distributed: resilient, scalable

\subsection{Existing Paxos databases}




\cleardoublepage

\chapter{Preparation}

\section{Paxos}

Paxos works by 

\section{ACID}

ACID in more detail


\section{Choices}

\subsection{Twisted}

I chose Twisted in order to make implementing the protocol easier. Twisted provides a lot of
support for implementing protocols and helper classes etc. Also as I am using a state machine
approach to implementing DBP and Paxos, twisted's asynchronous system works very well with this
approach.

\subsection{Python}

There were several options for which programming language to use for this project. C - too
verbose, erlang - too weird, python - just right?

\section{Requirements Analysis}

Requirements for my system:
Transactions
ACID properties
\begin{enumerate}
\item Atomic
\item Consistent
\item Isolated
\item Durable
\end{enumerate}


\section{Software Engineering}

\subsection{The Model}

Considered using the waterfall model, but didn't fit my requirements (fast prototyping to
understand Paxos). Decided on spiral because of xyz.

\subsection{Version Control}

For version control I decided to use Git, as it is a system I am familiar with, and serves my need
both as a VCS and as a remote backup. In my experience it is more usable than other DVCSs such as
Bazaar, Darcs or Mercurial, and much faster than centralised VCSs such as CVS or SVN. Using Git I
backed up my project both to bitbucket, an online repository service which provides free private
repository hosting, and to my own server.

\subsection{backups}

For backups I use the PWF to develop my project on. As it is stored in Git I can back it up simply
by pushing the repo to other hosts. I currently have it backed up to two other hosts.

\subsection{Testing}

Testing is really important
network
lots of effects
lots of subsystems

\subsubsection{Unit Testing}

unit testing really key
regression testing
testing different subsystems

\subsubsection{Integration Testing}

test program etc
see simple change propagate across complex system



\cleardoublepage
\chapter{Implementation}

SQL parser
- what it supports

-start up costs
  - ping time etc
  - inefficiencies
  - cf. "supernodes" vs DHTs to organise nodes

Talk about laptop breaking


\cleardoublepage
\chapter{Evaluation}

This is where the second most amount of marks are gained.

\section{Testing}

\begin{enumerate}
	\item unit test inertia
	\item test programs, see complex effects of single change.
	\item durable - network - stable storage
\end{enumerate}



\cleardoublepage
\chapter{Conclusion}

Conclude here.




\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% the bibliography

\addcontentsline{toc}{chapter}{Bibliography}
\bibliography{refs}
\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% the appendices
\appendix

\chapter{Project Proposal}

\input{propbody}

\end{document}
